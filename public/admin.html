<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZEMA - Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
        font-family: 'Segoe UI', Tahoma, sans-serif; 
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
        min-height: 100vh; 
        color: #333; 
    }
    .container { max-width: 1800px; margin: 0 auto; padding: 20px; }

    /* Login Form */
    .login-form { 
        background: white; 
        padding: 40px; 
        border-radius: 20px; 
        box-shadow: 0 20px 60px rgba(0,0,0,0.3); 
        max-width: 400px; 
        margin: 100px auto; 
        text-align: center; 
    }
    .login-form h2 { color: #667eea; margin-bottom: 30px; }
    .login-form input { 
        width: 100%; 
        padding: 15px; 
        margin: 10px 0; 
        border: 2px solid #e8ecef; 
        border-radius: 10px; 
        font-size: 16px; 
    }
    .login-form button { 
        width: 100%; 
        padding: 15px; 
        background: #667eea; 
        color: white; 
        border: none; 
        border-radius: 10px; 
        font-size: 16px; 
        cursor: pointer; 
        margin-top: 20px; 
    }
    .login-form .error { color: #dc3545; margin-top: 10px; }

    /* Admin Panel */
    .admin-panel { display: none; }
    header { 
        background: white; 
        padding: 25px; 
        border-radius: 15px; 
        margin-bottom: 20px; 
        text-align: center; 
        box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
    }
    header h1 { color: #667eea; margin-bottom: 10px; }
    .logout-btn { 
        background: #dc3545; 
        color: white; 
        border: none; 
        padding: 10px 20px; 
        border-radius: 8px; 
        cursor: pointer; 
    }

    /* Stats Cards */
    .stats-grid { 
        display: grid; 
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
        gap: 20px; 
        margin-bottom: 30px; 
    }
    .stat-card { 
        background: white; 
        padding: 25px; 
        border-radius: 15px; 
        text-align: center; 
        box-shadow: 0 5px 20px rgba(0,0,0,0.1); 
    }
    .stat-value { 
        font-size: 2.5em; 
        font-weight: bold; 
        color: #667eea; 
        margin: 10px 0; 
    }
    .stat-label { color: #666; }

    /* Tabs */
    .tabs { 
        background: white; 
        border-radius: 15px; 
        padding: 10px; 
        margin-bottom: 20px; 
        display: flex; 
        flex-wrap: wrap; 
    }
    .tab { 
        padding: 12px 25px; 
        cursor: pointer; 
        border-radius: 10px; 
        margin: 5px; 
        transition: all 0.3s; 
    }
    .tab.active { background: #667eea; color: white; }

    /* Tab Content */
    .tab-content { 
        display: none; 
        background: white; 
        padding: 30px; 
        border-radius: 15px; 
        margin-bottom: 20px; 
    }
    .tab-content.active { display: block; }

    /* Forms & Lists */
    .form-group { margin-bottom: 20px; }
    .form-group label { display: block; margin-bottom: 8px; font-weight: 600; }
    .form-group input, .form-group select, .form-group textarea { 
        width: 100%; 
        padding: 12px; 
        border: 2px solid #e8ecef; 
        border-radius: 8px; 
    }
    
    .user-item, .payment-item, .withdrawal-item, .game-item, .contest-item {
        background: #f8f9fa; 
        padding: 20px; 
        border-radius: 10px; 
        margin-bottom: 15px; 
        border-left: 4px solid #667eea; 
        display: flex; 
        justify-content: space-between; 
        align-items: center;
    }
    .contest-item { border-left-color: #ff6b6b; }
    
    /* Buttons */
    .btn { 
        padding: 10px 20px; 
        border: none; 
        border-radius: 8px; 
        cursor: pointer; 
        font-weight: 600; 
        margin: 5px; 
    }
    .btn-success { background: #28a745; color: white; }
    .btn-danger { background: #dc3545; color: white; }
    .btn-warning { background: #ffc107; color: #333; }
    .btn-primary { background: #667eea; color: white; }
    .btn-info { background: #17a2b8; color: white; }
    .btn-secondary { background: #6c757d; color: white; }
    
    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; }
    .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
    
    /* Modal */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.5);
        z-index: 1000;
        overflow: auto;
    }
    .modal-content {
        background: white;
        margin: 50px auto;
        padding: 30px;
        border-radius: 15px;
        width: 90%;
        max-width: 800px;
        max-height: 80vh;
        overflow-y: auto;
    }
    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        border-bottom: 2px solid #e8ecef;
        padding-bottom: 15px;
    }
    .close-modal {
        background: #dc3545;
        color: white;
        border: none;
        border-radius: 50%;
        width: 35px;
        height: 35px;
        cursor: pointer;
        font-size: 20px;
    }
    
    @media (max-width: 768px) {
        .grid-2, .grid-3, .grid-4 { grid-template-columns: 1fr; }
        .user-item, .payment-item, .withdrawal-item, .game-item, .contest-item { 
            flex-direction: column; 
            align-items: flex-start; 
        }
        .tabs { flex-direction: column; }
        .tab { width: 100%; text-align: center; }
    }

    /* Badges */
    .badge { 
        display: inline-block; 
        padding: 5px 10px; 
        border-radius: 5px; 
        font-size: 0.9em; 
        font-weight: bold; 
    }
    .badge-success { background: #28a745; color: white; }
    .badge-warning { background: #ffc107; color: #333; }
    .badge-info { background: #17a2b8; color: white; }
    .badge-danger { background: #dc3545; color: white; }
    
    /* Activity Item */
    .activity-item {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 10px;
        border-left: 3px solid #667eea;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Login Form -->
    <div id="loginForm" class="login-form">
      <h2>ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
      <input type="email" id="adminEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
      <input type="password" id="adminPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
      <button onclick="adminLogin()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
      <div id="loginError" class="error"></div>
    </div>
    
    <!-- Admin Panel -->
    <div id="adminPanel" class="admin-panel">
      <!-- Header -->
      <header>
        <h1>ZEMA - Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h1>
        <button class="logout-btn" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
      </header>
      
      <!-- Stats -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-value" id="totalUsers">0</div>
          <div class="stat-label">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="activeUsers">0</div>
          <div class="stat-label">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ†</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="platformBalance">$0</div>
          <div class="stat-label">Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ù†ØµØ©</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="pendingPayments">0</div>
          <div class="stat-label">Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</div>
        </div>
      </div>
      
      <!-- Tabs -->
      <div class="tabs">
        <div class="tab active" onclick="switchTab('dashboard')">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</div>
        <div class="tab" onclick="switchTab('users')">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
        <div class="tab" onclick="switchTab('payments')">Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</div>
        <div class="tab" onclick="switchTab('withdrawals')">Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª</div>
        <div class="tab" onclick="switchTab('contests')">ğŸ² Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª</div>
        <div class="tab" onclick="switchTab('games')">ğŸ® Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</div>
        <div class="tab" onclick="switchTab('notifications')">ğŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</div>
        <div class="tab" onclick="switchTab('balance')">ğŸ’° ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±ØµÙŠØ¯</div>
        <div class="tab" onclick="switchTab('pages')">ğŸ“„ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©</div>
        <div class="tab" onclick="switchTab('settings')">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
      </div>
      
      <!-- Dashboard Tab -->
      <div id="dashboard" class="tab-content active">
        <h3>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ù†ØµØ©</h3>
        <div class="grid-3">
          <div class="stat-card">
            <div class="stat-value" id="totalDeposits">$0</div>
            <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="totalWithdrawals">$0</div>
            <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="successRate">100%</div>
            <div class="stat-label">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­</div>
          </div>
        </div>
        <div class="grid-3" style="margin-top: 20px;">
          <div class="stat-card">
            <div class="stat-value" id="pendingWithdrawals">0</div>
            <div class="stat-label">Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="totalCommissions">$0</div>
            <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="totalContests">0</div>
            <div class="stat-label">Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©</div>
          </div>
        </div>
        <div style="margin-top: 30px;">
          <h4>Ø¢Ø®Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</h4>
          <div id="recentUsers" style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 10px;">
            Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...
          </div>
        </div>
      </div>
      
      <!-- Users Tab -->
      <div id="users" class="tab-content">
        <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>
        <input type="text" id="userSearch" placeholder="Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø£Ùˆ ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø©..." 
               onkeyup="searchUsers()" style="width: 100%; padding: 12px; margin-bottom: 20px; border-radius: 8px; border: 2px solid #e8ecef;">
        <div id="usersList">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
      </div>
      
      <!-- Payments Tab -->
      <div id="payments" class="tab-content">
        <h3>Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</h3>
        <div id="paymentsList">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
      </div>
      
      <!-- Withdrawals Tab -->
      <div id="withdrawals" class="tab-content">
        <h3>Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨</h3>
        <p style="color: #666; margin-bottom: 15px;">Ù…Ù„Ø§Ø­Ø¸Ø©: Ø³ÙŠØªÙ… Ø­Ø°Ù Ø·Ù„Ø¨ Ø§Ù„Ø³Ø­Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù„Ù‚Ø¨ÙˆÙ„ Ø£Ùˆ Ø§Ù„Ø±ÙØ¶</p>
        <div id="withdrawalsList">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
      </div>
      
      <!-- Contests Tab -->
      <div id="contests" class="tab-content">
        <h3>ğŸ² Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª</h3>
        
        <div style="background: linear-gradient(135deg, #ff6b6b, #ee5a24); color: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
          <h4 style="color: white; margin-bottom: 15px;">âš™ï¸ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³Ø§Ø¨Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©</h4>
          <div class="grid-2">
            <div class="form-group">
              <input type="text" id="contestTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©" style="background: white; color: #333;">
            </div>
            <div class="form-group">
              <input type="text" id="contestDescription" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©" style="background: white; color: #333;">
            </div>
            <div class="form-group">
              <input type="number" id="contestTicketPrice" placeholder="Ø³Ø¹Ø± Ø§Ù„ØªØ°ÙƒØ±Ø© ($)" min="0.01" step="0.01" style="background: white; color: #333;">
            </div>
            <div class="form-group">
              <input type="number" id="contestPrize" placeholder="Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© ($)" min="1" step="0.01" style="background: white; color: #333;">
            </div>
            <div class="form-group">
              <input type="number" id="contestMaxParticipants" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† Ø§Ù„Ø£Ù‚ØµÙ‰" min="1" style="background: white; color: #333;">
            </div>
            <div class="form-group">
              <input type="number" id="contestMaxTicketsPerUser" placeholder="Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„ØªØ°Ø§ÙƒØ± Ù„ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù…" min="1" style="background: white; color: #333;">
            </div>
            <div class="form-group">
              <label style="color: white; display: block; margin-bottom: 10px;">ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡:</label>
              <input type="datetime-local" id="contestEndDate" style="background: white; color: #333; width: 100%; padding: 12px; border-radius: 8px;">
            </div>
            <div class="form-group">
              <label style="color: white; display: block; margin-bottom: 10px;">ğŸ“Š Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©:</label>
              <select id="contestStatus" style="background: white; color: #333; width: 100%; padding: 12px; border-radius: 8px;">
                <option value="active">Ù†Ø´Ø·</option>
                <option value="pending">Ù…Ø¹Ù„Ù‚</option>
                <option value="completed">Ù…Ù†ØªÙ‡ÙŠ</option>
              </select>
            </div>
          </div>
          <div class="form-group" style="margin-bottom: 15px;">
            <label style="color: white;">
              <input type="checkbox" id="contestAutoDrawNumber" style="margin-left: 5px;"> ğŸ² ØªØ­Ø¯ÙŠØ¯ Ø±Ù‚Ù… Ø§Ù„ÙÙˆØ² Ù…Ø³Ø¨Ù‚Ø§Ù‹
            </label>
          </div>
          <button class="btn btn-primary" onclick="createContest()" style="background: white; color: #ff6b6b; border: 2px solid white; font-weight: bold; padding: 12px 25px;">
            ğŸ¯ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³Ø§Ø¨Ù‚Ø©
          </button>
        </div>

        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
          <h4 style="margin-bottom: 15px;">ğŸ“‹ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h4>
          <div style="display: flex; gap: 10px; margin-bottom: 15px;">
            <button class="btn btn-info" onclick="loadContests()">ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
            <button class="btn btn-success" onclick="filterContests('active')">Ù†Ø´Ø·Ø©</button>
            <button class="btn btn-warning" onclick="filterContests('pending')">Ù…Ø¹Ù„Ù‚Ø©</button>
            <button class="btn btn-secondary" onclick="filterContests('completed')">Ù…Ù†ØªÙ‡ÙŠØ©</button>
            <button class="btn btn-primary" onclick="filterContests('all')">Ø§Ù„ÙƒÙ„</button>
          </div>
          <div id="contestsList">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª...</div>
        </div>
      </div>
      
      <!-- Games Tab -->
      <div id="games" class="tab-content">
        <h3>ğŸ® Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</h3>
        <div class="form-group">
          <input type="text" id="gameTitle" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø¹Ø¨Ø©">
        </div>
        <div class="form-group">
          <input type="text" id="gameUrl" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ù„Ø¹Ø¨Ø© (URL)">
        </div>
        <div class="grid-2">
          <div class="form-group">
            <select id="gameType" style="width: 100%; padding: 12px; border-radius: 8px;">
              <option value="casino">ÙƒØ§Ø²ÙŠÙ†Ùˆ</option>
              <option value="slots">Ø³Ù„ÙˆØªØ³</option>
              <option value="poker">Ø¨ÙˆÙƒØ±</option>
              <option value="sports">Ø±ÙŠØ§Ø¶Ø©</option>
            </select>
          </div>
          <div class="form-group">
            <select id="accessType" style="width: 100%; padding: 12px; border-radius: 8px;">
              <option value="free">Ù…Ø¬Ø§Ù†ÙŠ</option>
              <option value="premium">Ù…Ù…ÙŠØ²</option>
            </select>
          </div>
        </div>
        <button class="btn btn-primary" onclick="addGame()">â• Ø¥Ø¶Ø§ÙØ© Ù„Ø¹Ø¨Ø©</button>
        <div id="gamesList" style="margin-top: 20px;">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
      </div>
      
      <!-- Notifications Tab -->
      <div id="notifications" class="tab-content">
        <h3>ğŸ”” Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h3>
        
        <div style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 25px; border-radius: 10px; margin-bottom: 25px;">
          <h4 style="color: white; margin-bottom: 20px;">Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø¬Ø¯ÙŠØ¯</h4>
          
          <div class="form-group">
            <label style="color: white;">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±</label>
            <input type="text" id="notificationTitle" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±">
          </div>
          
          <div class="form-group">
            <label style="color: white;">Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±</label>
            <textarea id="notificationMessage" placeholder="Ø£Ø¯Ø®Ù„ Ù†Øµ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±..." rows="4"></textarea>
          </div>
          
          <div class="form-group">
            <label style="color: white;">Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±</label>
            <select id="notificationType" style="width: 100%; padding: 12px; border-radius: 8px;">
              <option value="system">Ù†Ø¸Ø§Ù…</option>
              <option value="info">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</option>
              <option value="success">Ù†Ø¬Ø§Ø­</option>
              <option value="warning">ØªØ­Ø°ÙŠØ±</option>
              <option value="contest">Ù…Ø³Ø§Ø¨Ù‚Ø©</option>
              <option value="payment">Ø¯ÙØ¹</option>
            </select>
          </div>
          
          <div class="form-group">
            <label style="color: white;">Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰:</label>
            <div style="display: flex; gap: 15px; margin-top: 10px;">
              <label style="color: white; display: flex; align-items: center; gap: 5px;">
                <input type="radio" name="sendTo" value="all" checked onchange="toggleUserSelect()"> 
                Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ†
              </label>
              <label style="color: white; display: flex; align-items: center; gap: 5px;">
                <input type="radio" name="sendTo" value="single" onchange="toggleUserSelect()"> 
                Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ø¯Ø¯
              </label>
            </div>
          </div>
          
          <div id="userSelectContainer" style="display: none; margin-top: 15px;">
            <label style="color: white;">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</label>
            <div style="display: flex; gap: 10px;">
              <input type="email" id="userEmailSelect" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…" style="flex: 1;">
              <button type="button" class="btn btn-secondary" onclick="searchUserForNotification()">Ø¨Ø­Ø«</button>
            </div>
            <div id="userNotificationInfo" style="margin-top: 10px; display: none;"></div>
          </div>
          
          <button class="btn" onclick="sendNotification()" style="background: white; color: #28a745; border: 2px solid white; margin-top: 20px;">
            ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
          </button>
        </div>
        
        <div id="notificationHistory" style="margin-top: 30px;">
          <h4>Ø¢Ø®Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø±Ø³Ù„Ø©</h4>
          <div id="notificationsHistoryList" style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 10px;">
            Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...
          </div>
        </div>
      </div>
      
      <!-- Balance Adjustment Tab -->
      <div id="balance" class="tab-content">
        <h3>ğŸ’° ØªØ¹Ø¯ÙŠÙ„ Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h3>
        <div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
          <p style="color: #155724; margin-bottom: 10px;"><strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø£Ùˆ Ø®ØµÙ… Ø±ØµÙŠØ¯ Ù„Ø£ÙŠ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø¹ Ø°ÙƒØ± Ø§Ù„Ø³Ø¨Ø¨</p>
        </div>
        
        <div class="form-group">
          <label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
          <input type="email" id="balanceUserEmail" placeholder="user@example.com" onkeyup="searchUserForBalance()">
          <div id="userBalanceInfo" style="margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 8px; display: none;">
            <div id="userInfoContent"></div>
          </div>
        </div>
        
        <div class="grid-2">
          <div class="form-group">
            <label>Ø§Ù„Ù…Ø¨Ù„Øº ($)</label>
            <input type="number" id="balanceAmount" placeholder="10.00" min="0.01" step="0.01">
          </div>
          <div class="form-group">
            <label>Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</label>
            <select id="balanceOperation" style="width: 100%; padding: 12px; border-radius: 8px;">
              <option value="add">â• Ø¥Ø¶Ø§ÙØ© Ø±ØµÙŠØ¯</option>
              <option value="subtract">â– Ø®ØµÙ… Ø±ØµÙŠØ¯</option>
            </select>
          </div>
        </div>
        
        <div class="form-group">
          <label>Ø³Ø¨Ø¨ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„</label>
          <textarea id="balanceReason" placeholder="Ø£Ø¯Ø®Ù„ Ø³Ø¨Ø¨ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„..." rows="3"></textarea>
        </div>
        
        <button class="btn btn-primary" onclick="adjustUserBalance()">ğŸ’³ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„</button>
        
        <div id="balancePreview" style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 8px; display: none;">
          <h4>Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„:</h4>
          <div id="previewContent"></div>
        </div>
      </div>
      
      <!-- Pages Tab -->
      <div id="pages" class="tab-content">
        <h3>ğŸ“„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©</h3>
        
        <div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin-bottom: 25px;">
          <p style="color: #155724; margin-bottom: 10px;"><strong>âš–ï¸ Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ù…Ø­ØªÙˆÙ‰ ØµÙØ­Ø© Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ© ÙˆØ´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</p>
          <div style="display: flex; gap: 15px; margin-top: 15px;">
            <a href="/terms" target="_blank" class="btn btn-info" style="padding: 10px 20px;">
              ğŸ‘ï¸ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø´Ø±ÙˆØ· Ø§Ù„Ø®Ø¯Ù…Ø©
            </a>
            <a href="/privacy" target="_blank" class="btn btn-info" style="padding: 10px 20px;">
              ğŸ‘ï¸ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©
            </a>
          </div>
        </div>
        
        <div class="form-group">
          <label>ğŸ“ Ø§Ø®ØªØ± Ø§Ù„ØµÙØ­Ø©:</label>
          <select id="pageSelector" onchange="loadPage()" style="width: 100%; padding: 12px; border-radius: 8px; margin-bottom: 20px; background: #f8f9fa;">
            <option value="terms">ğŸ“œ Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… (Terms of Service)</option>
            <option value="privacy">ğŸ”’ Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ© (Privacy Policy)</option>
          </select>
        </div>
        
        <div class="form-group">
          <label>ğŸ“Œ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø©</label>
          <input type="text" id="pageTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø©" style="width: 100%; padding: 12px; border-radius: 8px; background: #f8f9fa;">
        </div>
        
        <div class="form-group">
          <label>ğŸ“ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙØ­Ø© (HTML Ù…Ø³Ù…ÙˆØ­)</label>
          <textarea id="pageContent" rows="15" placeholder="Ø£Ø¯Ø®Ù„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙØ­Ø© Ù‡Ù†Ø§... ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… HTML Ù„Ù„ØªÙ†Ø³ÙŠÙ‚" style="width: 100%; padding: 12px; border-radius: 8px; font-family: 'Courier New', monospace; background: #f8f9fa;"></textarea>
        </div>
        
        <div style="display: flex; gap: 10px; margin-top: 20px; flex-wrap: wrap;">
          <button class="btn btn-primary" onclick="loadPage()">
            ğŸ”„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
          </button>
          <button class="btn btn-success" onclick="savePage()">
            ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØµÙØ­Ø©
          </button>
          <button class="btn btn-warning" onclick="previewPage()">
            ğŸ‘ï¸ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙØ­Ø©
          </button>
          <button class="btn btn-info" onclick="resetPageForm()">
            ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
          </button>
        </div>
        
        <div id="pagePreview" style="margin-top: 30px; display: none;">
          <h4>ğŸ‘ï¸ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙØ­Ø©:</h4>
          <div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid #667eea; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
            <iframe id="previewFrame" style="width: 100%; height: 400px; border: none; border-radius: 5px;"></iframe>
          </div>
        </div>
        
        <!-- Ù‚ÙˆØ§Ù„Ø¨ Ø³Ø±ÙŠØ¹Ø© -->
        <div style="margin-top: 30px; background: #fff3cd; padding: 20px; border-radius: 10px;">
          <h4>ğŸš€ Ù‚ÙˆØ§Ù„Ø¨ Ø³Ø±ÙŠØ¹Ø©:</h4>
          <div style="display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap;">
            <button class="btn btn-secondary" onclick="loadTemplate('terms_basic')" style="padding: 8px 15px;">
              ğŸ“œ Ù†Ù…ÙˆØ°Ø¬ Ø´Ø±ÙˆØ· Ø£Ø³Ø§Ø³ÙŠ
            </button>
            <button class="btn btn-secondary" onclick="loadTemplate('privacy_basic')" style="padding: 8px 15px;">
              ğŸ”’ Ù†Ù…ÙˆØ°Ø¬ Ø®ØµÙˆØµÙŠØ© Ø£Ø³Ø§Ø³ÙŠ
            </button>
            <button class="btn btn-secondary" onclick="loadTemplate('terms_detailed')" style="padding: 8px 15px;">
              ğŸ“„ Ù†Ù…ÙˆØ°Ø¬ Ø´Ø±ÙˆØ· Ù…ÙØµÙ„
            </button>
            <button class="btn btn-secondary" onclick="loadTemplate('privacy_detailed')" style="padding: 8px 15px;">
              ğŸ›¡ï¸ Ù†Ù…ÙˆØ°Ø¬ Ø®ØµÙˆØµÙŠØ© Ù…ÙØµÙ„
            </button>
          </div>
        </div>
      </div>
      
      <!-- Settings Tab -->
      <div id="settings" class="tab-content">
        <h3>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ù†ØµØ©</h3>
        
        <div class="grid-2">
          <!-- Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© -->
          <div style="background: #e8f5e8; padding: 20px; border-radius: 10px;">
            <h4 style="color: #155724; margin-bottom: 15px;">ğŸ“§ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„</h4>
            <div class="form-group">
              <label>ğŸ“§ Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¯ÙØ¹ (Email)</label>
              <input type="email" id="paymentWallet" placeholder="admin@zema.com" style="background: white;">
              <small style="color: #666;">Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯</small>
            </div>
            <div class="form-group">
              <label>ğŸ“ Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¯Ø¹Ù…</label>
              <input type="email" id="supportEmail" placeholder="support@zema.com" style="background: white;">
              <small style="color: #666;">Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø¯Ø¹Ù…</small>
            </div>
            <div class="form-group">
              <label>ğŸ”— Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø¹Ù… (Telegram)</label>
              <input type="text" id="supportLink" placeholder="https://t.me/zema_support" style="background: white;">
              <small style="color: #666;">Ø±Ø§Ø¨Ø· Ù‚Ù†Ø§Ø© Ø§Ù„Ø¯Ø¹Ù… Ø¹Ù„Ù‰ ØªÙ„ØºØ±Ø§Ù…</small>
            </div>
            <div class="form-group">
              <label>ğŸ“ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ø¨Ø¯ÙŠÙ„</label>
              <input type="text" id="supportLink2" placeholder="https://t.me/zema_support2" style="background: white;">
              <small style="color: #666;">Ø±Ø§Ø¨Ø· Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ù„Ù„Ø¯Ø¹Ù…</small>
            </div>
          </div>
          
          <!-- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© -->
          <div style="background: #e3f2fd; padding: 20px; border-radius: 10px;">
            <h4 style="color: #1565c0; margin-bottom: 15px;">ğŸ’° Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©</h4>
            <div class="form-group">
              <label>ğŸ¯ Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ø¥Ø­Ø§Ù„Ø© (%)</label>
              <input type="number" id="referralCommission" placeholder="50" min="0" max="100" style="background: white;">
              <small style="color: #666;">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© Ù…Ù† ÙƒÙ„ Ø¥Ø­Ø§Ù„Ø© Ù†Ø§Ø¬Ø­Ø©</small>
            </div>
            <div class="form-group">
              <label>ğŸ’° Ø­Ø¯ Ø§Ù„Ø³Ø­Ø¨ Ø§Ù„Ø£Ø¯Ù†Ù‰ ($)</label>
              <input type="number" id="minWithdrawal" placeholder="3" min="1" style="background: white;">
              <small style="color: #666;">Ø£Ù‚Ù„ Ù…Ø¨Ù„Øº ÙŠÙ…ÙƒÙ† Ø³Ø­Ø¨Ù‡</small>
            </div>
            <div class="form-group">
              <label>ğŸ« Ø±Ø³ÙˆÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ($)</label>
              <input type="number" id="registrationAmount" placeholder="1" min="1" style="background: white;">
              <small style="color: #666;">Ù…Ø¨Ù„Øº ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨</small>
            </div>
            <div class="form-group">
              <label>â° ÙˆÙ‚Øª Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø³Ø­Ø¨ (Ø³Ø§Ø¹Ø©)</label>
              <input type="number" id="withdrawalTime" placeholder="48" min="1" style="background: white;">
              <small style="color: #666;">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø³Ø­Ø¨</small>
            </div>
          </div>
          
          <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª -->
          <div style="background: #fff3cd; padding: 20px; border-radius: 10px; margin-top: 20px;">
            <h4 style="color: #856404; margin-bottom: 15px;">ğŸ² Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª</h4>
            <div class="grid-2">
              <div class="form-group">
                <label>ğŸ« Ø³Ø¹Ø± ØªØ°ÙƒØ±Ø© Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© ($)</label>
                <input type="number" id="contestTicketPriceSetting" placeholder="1" min="0.01" step="0.01" style="background: white;">
              </div>
              <div class="form-group">
                <label>ğŸ† Ø¬Ø§Ø¦Ø²Ø© Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© ($)</label>
                <input type="number" id="contestPrizeSetting" placeholder="100" min="1" step="0.01" style="background: white;">
              </div>
            </div>
            <div class="form-group">
              <label>â³ Ù…Ø¯Ø© Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© (Ø£ÙŠØ§Ù…)</label>
              <input type="number" id="contestDuration" placeholder="7" min="1" style="background: white;">
              <small style="color: #666;">Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ø¨Ø§Ù„Ø£ÙŠØ§Ù…</small>
            </div>
          </div>
          
          <!-- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø¹Ø§Ù…Ø© -->
          <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-top: 20px; border: 1px solid #dee2e6;">
            <h4 style="color: #495057; margin-bottom: 15px;">ğŸŒ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø©</h4>
            <div class="form-group">
              <label>ğŸ·ï¸ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹</label>
              <input type="text" id="siteName" placeholder="ZEMA Platform" style="background: white;">
            </div>
            <div class="form-group">
              <label>ğŸ“ ÙˆØµÙ Ø§Ù„Ù…ÙˆÙ‚Ø¹</label>
              <input type="text" id="siteDescription" placeholder="Your Gateway to Financial Freedom" style="background: white;">
            </div>
            <div class="form-group">
              <label>ğŸ”— Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹</label>
              <input type="url" id="siteUrl" placeholder="https://zema-platform.onrender.com" style="background: white;">
            </div>
          </div>
        </div>
        
        <button class="btn btn-primary" onclick="saveSettings()" style="margin-top: 20px; padding: 12px 30px; font-size: 1.1em;">
          ğŸ’¾ Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        </button>
        
        <!-- Ù‚Ø³Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
        <div style="margin-top: 30px; background: #e8f5e8; padding: 20px; border-radius: 10px;">
          <h4 style="color: #155724; margin-bottom: 15px;">ğŸ”§ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø±ÙˆØ§Ø¨Ø·</h4>
          <div style="display: flex; gap: 15px; flex-wrap: wrap;">
            <button class="btn btn-info" onclick="testSupportLink()" style="padding: 10px 20px;">
              ğŸ”— Ø§Ø®ØªØ¨Ø§Ø± Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø¹Ù…
            </button>
            <button class="btn btn-success" onclick="testSiteLink()" style="padding: 10px 20px;">
              ğŸŒ Ø§Ø®ØªØ¨Ø§Ø± Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹
            </button>
            <button class="btn btn-warning" onclick="reloadSettings()" style="padding: 10px 20px;">
              ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
            </button>
          </div>
          <div id="testResults" style="margin-top: 15px; padding: 10px; background: white; border-radius: 5px; display: none;">
            <!-- Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- User Details Modal -->
  <div id="userDetailsModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modalTitle">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h3>
        <button class="close-modal" onclick="closeUserDetailsModal()">Ã—</button>
      </div>
      <div id="userDetailsContent">
        Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...
      </div>
    </div>
  </div>
  
  <!-- Draw Winner Modal -->
  <div id="drawWinnerModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="drawModalTitle">Ø³Ø­Ø¨ ÙØ§Ø¦Ø² Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</h3>
        <button class="close-modal" onclick="closeDrawWinnerModal()">Ã—</button>
      </div>
      <div id="drawWinnerContent">
        <div class="form-group">
          <label>Ø±Ù‚Ù… Ø§Ù„ÙØ§Ø¦Ø² (Ø§Ø®ØªÙŠØ§Ø±ÙŠ - Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„Ø§Ø®ØªÙŠØ§Ø± Ø¹Ø´ÙˆØ§Ø¦ÙŠ)</label>
          <input type="number" id="winningNumberInput" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„ÙØ§Ø¦Ø²" min="1">
        </div>
        <div id="contestDrawInfo" style="margin-bottom: 20px;"></div>
        <button class="btn btn-success" onclick="confirmDrawWinner()">ğŸ² Ø³Ø­Ø¨ Ø§Ù„ÙØ§Ø¦Ø²</button>
      </div>
    </div>
  </div>

  <script>
    let adminToken = "";
    let currentUserForBalance = null;
    let selectedUserForNotification = null;
    let currentContestForDraw = null;
    let currentPageSlug = 'terms';

    async function adminLogin() {
        const email = document.getElementById('adminEmail').value;
        const password = document.getElementById('adminPassword').value;
        const errorDiv = document.getElementById('loginError');

        errorDiv.textContent = "";

        try {
            const response = await fetch('/api/admin/login', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ email, password })
            });

            const data = await response.json();

            if (data.success) {
                adminToken = data.data.token;
                localStorage.setItem('adminToken', adminToken);
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
                loadDashboard();
                loadSettings();
            } else {
                errorDiv.textContent = data.message;
            }
        } catch (error) {
            errorDiv.textContent = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…';
        }
    }

    function logout() {
        adminToken = "";
        localStorage.removeItem('adminToken');
        document.getElementById('loginForm').style.display = 'block';
        document.getElementById('adminPanel').style.display = 'none';
    }

    function switchTab(tabName) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));

        document.querySelector(`.tab[onclick="switchTab('${tabName}')"]`).classList.add('active');
        document.getElementById(tabName).classList.add('active');

        if (tabName === 'dashboard') loadDashboard();
        if (tabName === 'users') loadUsers();
        if (tabName === 'payments') loadPayments();
        if (tabName === 'withdrawals') loadWithdrawals();
        if (tabName === 'games') loadGames();
        if (tabName === 'settings') loadSettings();
        if (tabName === 'balance') resetBalanceForm();
        if (tabName === 'contests') loadContests();
        if (tabName === 'notifications') loadNotificationHistory();
        if (tabName === 'pages') loadPage();
    }

    async function loadDashboard() {
        try {
            const response = await fetch('/api/admin/dashboard', {
                headers: {'Authorization': `Bearer ${adminToken}`}
            });
            const data = await response.json();

            if (data.success) {
                const stats = data.data.stats;
                const recentUsers = data.data.recent_users || [];
                
                document.getElementById('totalUsers').textContent = stats.total_users;
                document.getElementById('activeUsers').textContent = stats.active_users;
                document.getElementById('platformBalance').textContent = '$' + stats.platform_balance;
                document.getElementById('pendingPayments').textContent = stats.pending_payments;
                document.getElementById('totalDeposits').textContent = '$' + stats.total_deposits;
                document.getElementById('totalWithdrawals').textContent = '$' + stats.total_withdrawals;
                document.getElementById('successRate').textContent = stats.success_rate + '%';
                document.getElementById('pendingWithdrawals').textContent = stats.pending_withdrawals;
                document.getElementById('totalCommissions').textContent = '$' + stats.total_commissions;
                document.getElementById('totalContests').textContent = stats.total_contests || 0;

                // Ø¹Ø±Ø¶ Ø¢Ø®Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
                let recentUsersHtml = '';
                if (recentUsers.length > 0) {
                    recentUsers.forEach(user => {
                        const date = new Date(user.created_at).toLocaleDateString('ar-EG');
                        recentUsersHtml += `
                        <div style="display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #eee;">
                            <div>
                                <strong>${user.email}</strong><br>
                                <small style="color: #666;">${date}</small>
                            </div>
                            <div>
                                ${user.is_active ? '<span class="badge badge-success">Ù†Ø´Ø·</span>' : '<span class="badge badge-warning">ØºÙŠØ± Ù†Ø´Ø·</span>'}
                                <button class="btn btn-info btn-sm" onclick="viewUserDetails('${user.id}')" style="margin-left: 5px; padding: 3px 8px; font-size: 0.8em;">ØªÙØ§ØµÙŠÙ„</button>
                            </div>
                        </div>`;
                    });
                } else {
                    recentUsersHtml = '<p style="text-align: center; color: #666;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</p>';
                }
                document.getElementById('recentUsers').innerHTML = recentUsersHtml;
            }
        } catch (error) {
            console.error('Dashboard load error:', error);
        }
    }

    async function loadUsers() {
        try {
            const response = await fetch('/api/admin/users', {
                headers: {'Authorization': `Bearer ${adminToken}`}
            });
            const data = await response.json();

            let html = "";
            if (data.data && data.data.users && data.data.users.length > 0) {
                data.data.users.forEach(user => {
                    const createdDate = new Date(user.created_at).toLocaleDateString('ar-EG');
                    html += `
                    <div class="user-item">
                        <div style="flex: 1;">
                            <strong>${user.email}</strong><br>
                            <div style="display: flex; gap: 15px; margin-top: 5px; font-size: 0.9em;">
                                <div>ğŸ’° Ø§Ù„Ø±ØµÙŠØ¯: <strong>$${user.balance}</strong></div>
                                <div>ğŸ« Ø§Ù„ÙƒÙˆØ¯: <strong>${user.referral_code}</strong></div>
                                <div>ğŸ“… Ø§Ù„ØªØ³Ø¬ÙŠÙ„: ${createdDate}</div>
                            </div>
                            <div style="margin-top: 5px;">
                                ${user.is_active ? 'âœ… <span style="color: #28a745;">Ù†Ø´Ø·</span>' : 'âŒ <span style="color: #dc3545;">ØºÙŠØ± Ù†Ø´Ø·</span>'}
                                ${user.is_admin ? ' | ğŸ‘‘ <span style="color: #ffc107;">Ø£Ø¯Ù…Ù†</span>' : ''}
                                ${user.is_banned ? ' | ğŸš« <span style="color: #721c24;">Ù…Ø­Ø¸ÙˆØ±</span>' : ''}
                            </div>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 5px;">
                            <button class="btn btn-info" onclick="viewUserDetails('${user.id}')">ğŸ“‹ ØªÙØ§ØµÙŠÙ„</button>
                            ${!user.is_active ? '<button class="btn btn-success" onclick="toggleUser(\'' + user.id + '\', \'activate\')">ØªÙØ¹ÙŠÙ„</button>' : ''}
                            ${user.is_active ? '<button class="btn btn-warning" onclick="toggleUser(\'' + user.id + '\', \'deactivate\')">ØªØ¹Ø·ÙŠÙ„</button>' : ''}
                            ${!user.is_banned ? '<button class="btn btn-danger" onclick="banUser(\'' + user.id + '\')">Ø­Ø¸Ø±</button>' : ''}
                            ${user.is_banned ? '<button class="btn btn-success" onclick="unbanUser(\'' + user.id + '\')">ÙÙƒ Ø§Ù„Ø­Ø¸Ø±</button>' : ''}
                        </div>
                    </div>`;
                });
            } else {
                html = '<div style="text-align: center; padding: 40px; color: #666;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø³Ø¬Ù„ÙŠÙ†</div>';
            }

            document.getElementById('usersList').innerHTML = html;
        } catch (error) {
            console.error('Users load error:', error);
            document.getElementById('usersList').innerHTML = '<div style="color: #dc3545; text-align: center;">Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>';
        }
    }

    async function searchUsers() {
        const search = document.getElementById('userSearch').value;
        if (!search.trim()) {
            loadUsers();
            return;
        }

        try {
            const response = await fetch(`/api/admin/users?search=${encodeURIComponent(search)}&limit=100`, {
                headers: {'Authorization': `Bearer ${adminToken}`}
            });
            const data = await response.json();

            let html = "";
            if (data.data && data.data.users && data.data.users.length > 0) {
                data.data.users.forEach(user => {
                    const createdDate = new Date(user.created_at).toLocaleDateString('ar-EG');
                    html += `
                    <div class="user-item">
                        <div style="flex: 1;">
                            <strong>${user.email}</strong><br>
                            <div style="display: flex; gap: 15px; margin-top: 5px; font-size: 0.9em;">
                                <div>ğŸ’° Ø§Ù„Ø±ØµÙŠØ¯: <strong>$${user.balance}</strong></div>
                                <div>ğŸ« Ø§Ù„ÙƒÙˆØ¯: <strong>${user.referral_code}</strong></div>
                                <div>ğŸ“… Ø§Ù„ØªØ³Ø¬ÙŠÙ„: ${createdDate}</div>
                            </div>
                            <div style="margin-top: 5px;">
                                ${user.is_active ? 'âœ… <span style="color: #28a745;">Ù†Ø´Ø·</span>' : 'âŒ <span style="color: #dc3545;">ØºÙŠØ± Ù†Ø´Ø·</span>'}
                                ${user.is_admin ? ' | ğŸ‘‘ <span style="color: #ffc107;">Ø£Ø¯Ù…Ù†</span>' : ''}
                                ${user.is_banned ? ' | ğŸš« <span style="color: #721c24;">Ù…Ø­Ø¸ÙˆØ±</span>' : ''}
                            </div>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 5px;">
                            <button class="btn btn-info" onclick="viewUserDetails('${user.id}')">ğŸ“‹ ØªÙØ§ØµÙŠÙ„</button>
                            ${!user.is_active ? '<button class="btn btn-success" onclick="toggleUser(\'' + user.id + '\', \'activate\')">ØªÙØ¹ÙŠÙ„</button>' : ''}
                            ${user.is_active ? '<button class="btn btn-warning" onclick="toggleUser(\'' + user.id + '\', \'deactivate\')">ØªØ¹Ø·ÙŠÙ„</button>' : ''}
                            ${!user.is_banned ? '<button class="btn btn-danger" onclick="banUser(\'' + user.id + '\')">Ø­Ø¸Ø±</button>' : ''}
                            ${user.is_banned ? '<button class="btn btn-success" onclick="unbanUser(\'' + user.id + '\')">ÙÙƒ Ø§Ù„Ø­Ø¸Ø±</button>' : ''}
                        </div>
                    </div>`;
                });
            } else {
                html = '<div style="text-align: center; padding: 40px; color: #666;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</div>';
            }

            document.getElementById('usersList').innerHTML = html;
        } catch (error) {
            console.error('Search error:', error);
        }
    }

    async function viewUserDetails(userId) {
        try {
            const response = await fetch(`/api/admin/users/${userId}/details`, {
                headers: {'Authorization': `Bearer ${adminToken}`}
            });
            
            const data = await response.json();
            
            if (data.success) {
                const user = data.data.user;
                const stats = data.data.stats;
                
                let html = `
                    <div style="margin-bottom: 25px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <div>
                                <h4 style="margin: 0; color: #667eea;">${user.email}</h4>
                                <p style="margin: 5px 0 0 0; color: #666;">ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø©: ${user.referral_code}</p>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 2em; font-weight: bold; color: #28a745;">$${user.balance}</div>
                                <small style="color: #666;">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ</small>
                            </div>
                        </div>
                        
                        <div class="grid-4" style="margin-bottom: 20px;">
                            <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="font-size: 1.5em; font-weight: bold; color: #667eea;">${stats.total_referrals}</div>
                                <small style="color: #666;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª</small>
                            </div>
                            <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="font-size: 1.5em; font-weight: bold; color: #28a745;">${stats.active_referrals}</div>
                                <small style="color: #666;">Ø¥Ø­Ø§Ù„Ø§Øª Ù†Ø´Ø·Ø©</small>
                            </div>
                            <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="font-size: 1.5em; font-weight: bold; color: #ff6b6b;">${stats.total_withdrawals}</div>
                                <small style="color: #666;">Ø³Ø­ÙˆØ¨Ø§Øª</small>
                            </div>
                            <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                <div style="font-size: 1.5em; font-weight: bold; color: #ffc107;">${stats.total_contest_participations}</div>
                                <small style="color: #666;">Ù…Ø´Ø§Ø±ÙƒØ§Øª Ù…Ø³Ø§Ø¨Ù‚Ø§Øª</small>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <span class="badge ${user.is_active ? 'badge-success' : 'badge-warning'}">${user.is_active ? 'Ù†Ø´Ø·' : 'ØºÙŠØ± Ù†Ø´Ø·'}</span>
                            ${user.is_admin ? '<span class="badge badge-warning" style="margin-left: 5px;">Ø£Ø¯Ù…Ù†</span>' : ''}
                            ${user.is_banned ? '<span class="badge badge-danger" style="margin-left: 5px;">Ù…Ø­Ø¸ÙˆØ±</span>' : ''}
                            ${user.email_verified ? '<span class="badge badge-success" style="margin-left: 5px;">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù…ÙˆØ«Ù‚</span>' : ''}
                        </div>
                        
                        <div style="color: #666; font-size: 0.9em;">
                            <div>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„: ${new Date(user.created_at).toLocaleString('ar-EG')}</div>
                            ${user.last_login ? `<div>ğŸ•’ Ø¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„: ${new Date(user.last_login).toLocaleString('ar-EG')}</div>` : ''}
                        </div>
                    </div>
                `;
                
                // Ø¥Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                if (data.data.referrals && data.data.referrals.length > 0) {
                    html += `
                        <div style="margin-bottom: 25px;">
                            <h5>ğŸ“Š Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª</h5>
                            <div style="max-height: 200px; overflow-y: auto;">
                    `;
                    
                    data.data.referrals.forEach(ref => {
                        const refUser = ref.referred_user;
                        const date = new Date(ref.created_at).toLocaleDateString('ar-EG');
                        html += `
                            <div style="background: #e8f5e8; padding: 10px; border-radius: 5px; margin-bottom: 8px;">
                                <div style="display: flex; justify-content: space-between;">
                                    <div>
                                        <strong>${refUser.email}</strong>
                                        <div style="font-size: 0.8em; color: #666;">${date}</div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="color: #28a745; font-weight: bold;">$${ref.commission_amount || 0}</div>
                                        <div style="font-size: 0.8em;">
                                            <span class="badge ${ref.status === 'active' ? 'badge-success' : 'badge-warning'}">${ref.status === 'active' ? 'Ù†Ø´Ø·' : 'Ù…Ø¹Ù„Ù‚'}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                    
                    html += `</div></div>`;
                }
                
                // Ù†Ø´Ø§Ø·Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                if (data.data.activities && data.data.activities.length > 0) {
                    html += `
                        <div style="margin-bottom: 25px;">
                            <h5>ğŸ“‹ Ø¢Ø®Ø± Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª</h5>
                            <div style="max-height: 300px; overflow-y: auto;">
                    `;
                    
                    data.data.activities.slice(0, 10).forEach(activity => {
                        const date = new Date(activity.created_at).toLocaleString('ar-EG');
                        let amountText = '';
                        if (activity.amount > 0) {
                            amountText = `<span style="color: #28a745; font-weight: bold;">$${activity.amount}</span>`;
                        }
                        
                        html += `
                            <div class="activity-item">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <div>
                                        <strong>${activity.description}</strong>
                                        <div style="font-size: 0.8em; color: #666;">${activity.activity_type}</div>
                                    </div>
                                    <div style="text-align: right;">
                                        ${amountText}
                                    </div>
                                </div>
                                <div style="font-size: 0.8em; color: #999;">${date}</div>
                            </div>
                        `;
                    });
                    
                    html += `</div></div>`;
                }
                
                // Ù…Ø´Ø§Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª
                if (data.data.contest_participations && data.data.contest_participations.length > 0) {
                    html += `
                        <div>
                            <h5>ğŸ² Ù…Ø´Ø§Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª</h5>
                            <div style="max-height: 200px; overflow-y: auto;">
                    `;
                    
                    data.data.contest_participations.forEach(part => {
                        const contest = part.contest;
                        const date = new Date(part.created_at).toLocaleDateString('ar-EG');
                        html += `
                            <div style="background: #fff3cd; padding: 10px; border-radius: 5px; margin-bottom: 8px;">
                                <div style="display: flex; justify-content: space-between;">
                                    <div>
                                        <strong>${contest.title}</strong>
                                        <div style="font-size: 0.8em; color: #666;">${date}</div>
                                        ${part.ticket_number ? `<div style="font-size: 0.8em; color: #ff6b6b;">Ø±Ù‚Ù… Ø§Ù„ØªØ°ÙƒØ±Ø©: ${part.ticket_number}</div>` : ''}
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="color: #ff6b6b; font-weight: bold;">$${contest.prize_amount}</div>
                                        <div style="font-size: 0.8em;">
                                            <span class="badge ${contest.status === 'active' ? 'badge-success' : 'badge-secondary'}">${contest.status === 'active' ? 'Ù†Ø´Ø·' : 'Ù…ÙƒØªÙ…Ù„'}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                    
                    html += `</div></div>`;
                }
                
                document.getElementById('userDetailsContent').innerHTML = html;
                document.getElementById('modalTitle').textContent = `ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${user.email}`;
                document.getElementById('userDetailsModal').style.display = 'block';
            }
        } catch (error) {
            console.error('User details error:', error);
            alert('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
        }
    }

    function closeUserDetailsModal() {
        document.getElementById('userDetailsModal').style.display = 'none';
    }

    async function toggleUser(userId, action) {
        if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ ${action === 'activate' ? 'ØªÙØ¹ÙŠÙ„' : 'ØªØ¹Ø·ÙŠÙ„'} Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ`)) return;

        try {
            const response = await fetch(`/api/admin/users/${userId}/toggle`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${adminToken}`
                },
                body: JSON.stringify({ action })
            });

            const data = await response.json();
            alert(data.message);
            loadUsers();
            loadDashboard();
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ ØªØ¹Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
        }
    }

    async function banUser(userId) {
        const reason = prompt("Ø³Ø¨Ø¨ Ø§Ù„Ø­Ø¸Ø±:");
        if (reason === null || reason.trim() === '') {
            alert('ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¨Ø¨ Ø§Ù„Ø­Ø¸Ø±');
            return;
        }

        try {
            const response = await fetch(`/api/admin/users/${userId}/ban`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${adminToken}`
                },
                body: JSON.stringify({ reason })
            });

            const data = await response.json();
            alert(data.message);
            loadUsers();
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
        }
    }

    async function unbanUser(userId) {
        if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ÙÙƒ Ø­Ø¸Ø± Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ')) return;

        try {
            const response = await fetch(`/api/admin/users/${userId}/ban`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${adminToken}`
                },
                body: JSON.stringify({ reason: "", action: "unban" })
            });

            const data = await response.json();
            alert(data.message);
            loadUsers();
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ ÙÙƒ Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
        }
    }

    async function loadPayments() {
        try {
            const response = await fetch('/api/admin/payments?status=pending', {
                headers: { 'Authorization': `Bearer ${adminToken}` }
            });
            const data = await response.json();

            let html = "";
            if (data.data && data.data.payments && data.data.payments.length > 0) {
                data.data.payments.forEach(payment => {
                    const date = new Date(payment.created_at).toLocaleDateString('ar-EG');
                    const user = payment.user;
                    html += `
                    <div class="payment-item">
                        <div style="flex: 1;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div>
                                    <strong>${payment.email}</strong><br>
                                    <small style="color: #666;">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${user?.email || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</small><br>
                                    <small style="color: #666;">ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø©: ${user?.referral_code || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</small>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 1.5em; font-weight: bold; color: #28a745;">$${payment.amount}</div>
                                    <small style="color: #666;">${date}</small>
                                </div>
                            </div>
                            <div style="margin-top: 10px; font-size: 0.9em;">
                                <strong>Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:</strong> ${payment.transaction_id}<br>
                                <strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> <span class="badge badge-warning">Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</span>
                            </div>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 5px;">
                            <button class="btn btn-success" onclick="approvePayment('${payment.id}')">âœ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø¯ÙØ¹</button>
                            <button class="btn btn-danger" onclick="rejectPayment('${payment.id}')">âŒ Ø±ÙØ¶ Ø§Ù„Ø¯ÙØ¹</button>
                        </div>
                    </div>`;
                });
            } else {
                html = '<div style="text-align: center; padding: 40px; color: #666;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¯ÙÙˆØ¹Ø§Øª Ù…Ø¹Ù„Ù‚Ø©</div>';
            }
            document.getElementById('paymentsList').innerHTML = html;
        } catch (error) {
            console.error('Payments load error:', error);
            document.getElementById('paymentsList').innerHTML = '<div style="color: #dc3545; text-align: center;">Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</div>';
        }
    }

    async function approvePayment(paymentId) {
        if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù‚Ø¨ÙˆÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ø¯ÙØ¹Ø© ÙˆØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ')) return;

        try {
            const response = await fetch(`/api/admin/payments/${paymentId}/approve`, {
                method: 'POST',
                headers: { 'Authorization': `Bearer ${adminToken}` }
            });
            const data = await response.json();
            
            if (data.success) {
                alert('âœ… ' + data.message + '\nØªÙ… Ø¥Ø¶Ø§ÙØ© $1 Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ù†ØµØ©');
            } else {
                alert('âŒ ' + data.message);
            }
            
            loadPayments();
            loadDashboard();
            loadUsers();
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø¯ÙØ¹');
        }
    }

    async function rejectPayment(paymentId) {
        const reason = prompt('Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶:');
        if (reason === null || reason.trim() === '') {
            alert('ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶');
            return;
        }

        try {
            const response = await fetch(`/api/admin/payments/${paymentId}/reject`, {
                method: 'POST',
                headers: { 
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${adminToken}`
                },
                body: JSON.stringify({ reason })
            });

            const data = await response.json();
            alert(data.message);
            loadPayments();
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¶ Ø§Ù„Ø¯ÙØ¹');
        }
    }

    async function loadWithdrawals() {
        try {
            const response = await fetch('/api/admin/withdrawals?status=pending', {
                headers: { 'Authorization': `Bearer ${adminToken}` }
            });
            const data = await response.json();

            let html = '';
            if (data.data && data.data.withdrawals && data.data.withdrawals.length > 0) {
                data.data.withdrawals.forEach(withdrawal => {
                    const date = new Date(withdrawal.created_at).toLocaleDateString('ar-EG');
                    const user = withdrawal.user;
                    html += `
                    <div class="withdrawal-item">
                        <div style="flex: 1;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div>
                                    <strong>${withdrawal.email}</strong><br>
                                    <small style="color: #666;">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${user?.email || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</small><br>
                                    <small style="color: #666;">Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: $${user?.balance || '0'}</small>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 1.5em; font-weight: bold; color: #dc3545;">$${withdrawal.amount}</div>
                                    <small style="color: #666;">${date}</small>
                                </div>
                            </div>
                            <div style="margin-top: 10px; font-size: 0.9em;">
                                <strong>Ø§Ù„Ù…Ø­ÙØ¸Ø©:</strong> ${withdrawal.wallet_address}<br>
                                <strong>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ÙØ¸Ø©:</strong> ${withdrawal.wallet_type || 'USDT'}
                            </div>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 5px;">
                            <button class="btn btn-success" onclick="approveWithdrawal('${withdrawal.id}')">âœ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø³Ø­Ø¨</button>
                            <button class="btn btn-danger" onclick="rejectWithdrawal('${withdrawal.id}')">âŒ Ø±ÙØ¶ Ø§Ù„Ø³Ø­Ø¨</button>
                        </div>
                    </div>`;
                });
            } else {
                html = '<div style="text-align: center; padding: 40px; color: #666;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø­ÙˆØ¨Ø§Øª Ù…Ø¹Ù„Ù‚Ø©</div>';
            }
            document.getElementById('withdrawalsList').innerHTML = html;
        } catch (error) {
            console.error('Withdrawals load error:', error);
            document.getElementById('withdrawalsList').innerHTML = '<div style="color: #dc3545; text-align: center;">Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª</div>';
        }
    }

    async function approveWithdrawal(withdrawalId) {
        if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø³Ø­Ø¨ ÙˆØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¨Ù„Øº Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ')) return;

        try {
            const response = await fetch(`/api/admin/withdrawals/${withdrawalId}/approve`, {
                method: 'POST',
                headers: { 'Authorization': `Bearer ${adminToken}` }
            });

            const data = await response.json();
            alert(data.message);
            loadWithdrawals();
            loadDashboard();
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø³Ø­Ø¨');
        }
    }

    async function rejectWithdrawal(withdrawalId) {
        const reason = prompt('Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶:');
        if (reason === null || reason.trim() === '') {
            alert('ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¨Ø¨ Ø§Ù„Ø±ÙØ¶');
            return;
        }

        try {
            const response = await fetch(`/api/admin/withdrawals/${withdrawalId}/reject`, {
                method: 'POST',
                headers: { 
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${adminToken}`
                },
                body: JSON.stringify({ reason })
            });

            const data = await response.json();
            alert(data.message);
            loadWithdrawals();
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¶ Ø§Ù„Ø³Ø­Ø¨');
        }
    }

    async function loadGames() {
        try {
            const response = await fetch('/api/admin/games', {
                headers: { 'Authorization': `Bearer ${adminToken}` }
            });
            const data = await response.json();

            let html = "";
            if (data.data && data.data.length > 0) {
                data.data.forEach(game => {
                    const date = new Date(game.created_at).toLocaleDateString('ar-EG');
                    html += `
                    <div class="game-item">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: start; gap: 15px;">
                                <div style="width: 60px; height: 60px; background: #667eea; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5em;">
                                    ğŸ®
                                </div>
                                <div style="flex: 1;">
                                    <strong>${game.title}</strong><br>
                                    <div style="color: #666; margin: 5px 0;">${game.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}</div>
                                    <div style="display: flex; gap: 15px; font-size: 0.9em;">
                                        <span>Ø§Ù„Ù†ÙˆØ¹: ${game.game_type}</span>
                                        <span>Ø§Ù„ÙˆØµÙˆÙ„: ${game.access_type}</span>
                                        <span>Ø§Ù„ØªØ§Ø±ÙŠØ®: ${date}</span>
                                    </div>
                                    <div style="margin-top: 5px;">
                                        <a href="${game.game_url}" target="_blank" style="color: #667eea; text-decoration: none;">ğŸ”— ${game.game_url.substring(0, 50)}...</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 5px;">
                            <button class="btn btn-warning" onclick="editGame('${game.id}', '${game.title}')">ØªØ¹Ø¯ÙŠÙ„</button>
                            <button class="btn btn-danger" onclick="deleteGame('${game.id}', '${game.title}')">Ø­Ø°Ù</button>
                        </div>
                    </div>`;
                });
            } else {
                html = '<div style="text-align: center; padding: 40px; color: #666;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù„Ø¹Ø§Ø¨</div>';
            }

            document.getElementById('gamesList').innerHTML = html;
        } catch (error) {
            console.error('Games load error', error);
            document.getElementById('gamesList').innerHTML = '<div style="color: #dc3545; text-align: center;">Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</div>';
        }
    }

    async function addGame() {
        const title = document.getElementById('gameTitle').value;
        const url = document.getElementById('gameUrl').value;
        const gameType = document.getElementById('gameType').value;
        const accessType = document.getElementById('accessType').value;

        if (!title || !url) {
            alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ø³Ù… Ø§Ù„Ù„Ø¹Ø¨Ø© ÙˆØ±Ø§Ø¨Ø·Ù‡Ø§');
            return;
        }
        
        try {
            const response = await fetch('/api/admin/games', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${adminToken}`
                },
                body: JSON.stringify({ 
                    title, 
                    game_url: url,
                    game_type: gameType,
                    access_type: accessType
                })
            });

            const data = await response.json();
            
            if (data.success) {
                alert('âœ… ' + data.message);
                document.getElementById('gameTitle').value = '';
                document.getElementById('gameUrl').value = '';
                loadGames();
            } else {
                alert('âŒ ' + data.message);
            }
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„Ø¹Ø¨Ø©');
        }
    }

    async function editGame(gameId, currentTitle) {
        const newTitle = prompt('Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø¹Ø¨Ø©:', currentTitle);
        if (!newTitle) return;

        try {
            const response = await fetch(`/api/admin/games/${gameId}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${adminToken}`
                },
                body: JSON.stringify({ title: newTitle })
            });

            const data = await response.json();
            
            if (data.success) {
                alert('âœ… ' + data.message);
                loadGames();
            } else {
                alert('âŒ ' + data.message);
            }
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©');
        }
    }

    async function deleteGame(gameId, gameTitle) {
        if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø© "${gameTitle}"ØŸ`)) return;

        try {
            const response = await fetch(`/api/admin/games/${gameId}`, {
                method: 'DELETE',
                headers: {'Authorization': `Bearer ${adminToken}`}
            });

            const data = await response.json();
            
            if (data.success) {
                alert('âœ… ' + data.message);
                loadGames();
            } else {
                alert('âŒ ' + data.message);
            }
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø©');
        }
    }

    async function loadContests() {
        try {
            const response = await fetch('/api/admin/contests', {
                headers: { 'Authorization': `Bearer ${adminToken}` }
            });
            const data = await response.json();

            let html = "";
            if (data.data && data.data.length > 0) {
                data.data.forEach(contest => {
                    const startDate = new Date(contest.start_date).toLocaleDateString('ar-EG');
                    const endDate = new Date(contest.end_date).toLocaleDateString('ar-EG');
                    const status = contest.status === 'active' ? 'Ù†Ø´Ø·' : 'Ù…ÙƒØªÙ…Ù„';
                    const statusColor = contest.status === 'active' ? '#28a745' : '#6c757d';
                    const winnerInfo = contest.winner_email ? 
                        `<div style="margin-top: 10px; padding: 10px; background: #fff3cd; border-radius: 5px;">
                            ğŸ† <strong>Ø§Ù„ÙØ§Ø¦Ø²:</strong> ${contest.winner_email}
                            ${contest.winning_number ? `<br>ğŸ« <strong>Ø±Ù‚Ù… Ø§Ù„ÙÙˆØ²:</strong> ${contest.winning_number}` : ''}
                        </div>` : '';

                    html += `
                    <div class="contest-item">
                        <div style="flex: 1;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
                                <div>
                                    <h4 style="margin: 0; color: #ff6b6b;">${contest.title}</h4>
                                    <div style="color: #666; margin-top: 5px;">${contest.description || 'Ø´Ø±Ø§Ø¡ ØªØ°ÙƒØ±Ø© Ù„ÙØ±ØµØ© Ø±Ø¨Ø­ Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©'}</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 1.8em; font-weight: bold; color: #ff6b6b;">$${contest.prize_amount}</div>
                                    <small style="color: #666;">Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©</small>
                                </div>
                            </div>
                            
                            <div class="grid-4" style="margin-bottom: 15px;">
                                <div style="text-align: center; padding: 10px; background: white; border-radius: 5px;">
                                    <div style="font-weight: bold;">$${contest.ticket_price}</div>
                                    <small style="color: #666;">Ø³Ø¹Ø± Ø§Ù„ØªØ°ÙƒØ±Ø©</small>
                                </div>
                                <div style="text-align: center; padding: 10px; background: white; border-radius: 5px;">
                                    <div style="font-weight: bold;">${contest.participants_count || 0}</div>
                                    <small style="color: #666;">Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†</small>
                                </div>
                                <div style="text-align: center; padding: 10px; background: white; border-radius: 5px;">
                                    <div style="font-weight: bold;">$${contest.total_revenue || 0}</div>
                                    <small style="color: #666;">Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</small>
                                </div>
                                <div style="text-align: center; padding: 10px; background: white; border-radius: 5px;">
                                    <div style="font-weight: bold;">${endDate}</div>
                                    <small style="color: #666;">ÙŠÙ†ØªÙ‡ÙŠ ÙÙŠ</small>
                                </div>
                            </div>
                            
                            <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px;">
                                <span style="background: ${statusColor}; color: white; padding: 5px 10px; border-radius: 5px; font-size: 0.9em;">
                                    ${status}
                                </span>
                                <span style="color: #666; font-size: 0.9em;">Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©: ${startDate}</span>
                            </div>
                            
                            <div style="color: #666; font-size: 0.9em; margin-bottom: 10px;">
                                <span>ğŸ‘¥ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: ${contest.max_participants || 100}</span>
                                <span style="margin-right: 15px;">ğŸ« ØªØ°Ø§ÙƒØ± Ù„ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù…: ${contest.max_tickets_per_user || 5}</span>
                            </div>
                            
                            ${winnerInfo}
                        </div>
                        
                        <div style="display: flex; flex-direction: column; gap: 5px; min-width: 150px;">
                            ${contest.status === 'active' ? 
                                `<button class="btn btn-success" onclick="openDrawContestWinner('${contest.id}', '${contest.title}', ${contest.max_participants})">ğŸ² Ø³Ø­Ø¨ Ø§Ù„ÙØ§Ø¦Ø²</button>` : ''}
                            <button class="btn btn-warning" onclick="editContest('${contest.id}')">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
                            <button class="btn btn-danger" onclick="deleteContest('${contest.id}', '${contest.title}')">ğŸ—‘ï¸ Ø­Ø°Ù</button>
                        </div>
                    </div>`;
                });
            } else {
                html = '<div style="text-align: center; padding: 40px; color: #666;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø³Ø§Ø¨Ù‚Ø§Øª</div>';
            }

            document.getElementById('contestsList').innerHTML = html;
        } catch (error) {
            console.error('Contests load error:', error);
            document.getElementById('contestsList').innerHTML = '<div style="color: #dc3545; text-align: center;">Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª</div>';
        }
    }

    function openDrawContestWinner(contestId, contestTitle, maxParticipants) {
        currentContestForDraw = { id: contestId, title: contestTitle, maxParticipants };
        document.getElementById('drawModalTitle').textContent = `Ø³Ø­Ø¨ ÙØ§Ø¦Ø²: ${contestTitle}`;
        document.getElementById('winningNumberInput').placeholder = `Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø¨ÙŠÙ† 1 Ùˆ ${maxParticipants}`;
        document.getElementById('winningNumberInput').max = maxParticipants;
        document.getElementById('winningNumberInput').value = '';
        
        document.getElementById('contestDrawInfo').innerHTML = `
            <div style="background: #e8f5e8; padding: 15px; border-radius: 8px;">
                <strong>${contestTitle}</strong><br>
                <small>Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„ÙØ§Ø¦Ø² Ø¨ÙŠÙ† 1 Ùˆ ${maxParticipants} Ø£Ùˆ Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠ</small>
            </div>
        `;
        
        document.getElementById('drawWinnerModal').style.display = 'block';
    }

    function closeDrawWinnerModal() {
        document.getElementById('drawWinnerModal').style.display = 'none';
        currentContestForDraw = null;
    }

    async function confirmDrawWinner() {
        if (!currentContestForDraw) return;
        
        const winningNumber = document.getElementById('winningNumberInput').value;
        const contestId = currentContestForDraw.id;
        
        try {
            const response = await fetch(`/api/admin/contests/${contestId}/draw`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${adminToken}`
                },
                body: JSON.stringify({ winning_number: winningNumber || null })
            });

            const data = await response.json();
            
            if (data.success) {
                alert(`âœ… ${data.message}\n\nØ§Ù„ÙØ§Ø¦Ø²: ${data.data.winner.email}\nØ±Ù‚Ù… Ø§Ù„ÙÙˆØ²: ${data.data.winning_number}\nØ§Ù„Ø¬Ø§Ø¦Ø²Ø©: $${data.data.winner.prize_amount}`);
                closeDrawWinnerModal();
                loadContests();
                loadDashboard();
            } else {
                alert('âŒ ' + data.message);
            }
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ Ø³Ø­Ø¨ Ø§Ù„ÙØ§Ø¦Ø²');
        }
    }

    async function createContest() {
        const title = document.getElementById('contestTitle').value;
        const description = document.getElementById('contestDescription').value;
        const ticketPrice = document.getElementById('contestTicketPrice').value;
        const prize = document.getElementById('contestPrize').value;
        const maxParticipants = document.getElementById('contestMaxParticipants').value;
        const maxTicketsPerUser = document.getElementById('contestMaxTicketsPerUser').value;
        const autoDrawNumber = document.getElementById('contestAutoDrawNumber').checked;
        const endDate = document.getElementById('contestEndDate').value;
        const status = document.getElementById('contestStatus').value;

        if (!title || !ticketPrice || !prize || !maxParticipants) {
            alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ³Ø¹Ø± Ø§Ù„ØªØ°ÙƒØ±Ø© ÙˆÙ‚ÙŠÙ…Ø© Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© ÙˆØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†');
            return;
        }

        try {
            const response = await fetch('/api/admin/contests', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${adminToken}`
                },
                body: JSON.stringify({
                    title,
                    description,
                    ticket_price: ticketPrice,
                    prize_amount: prize,
                    max_participants: maxParticipants,
                    max_tickets_per_user: maxTicketsPerUser,
                    auto_draw_number: autoDrawNumber,
                    status: status,
                    end_date: endDate ? new Date(endDate).toISOString() : new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString()
                })
            });

            const data = await response.json();
            
            if (data.success) {
                alert('âœ… ' + data.message);
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¨Ø¯ÙˆÙ† Ù‚ÙŠÙ… Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
                document.getElementById('contestTitle').value = '';
                document.getElementById('contestDescription').value = '';
                document.getElementById('contestTicketPrice').value = '';
                document.getElementById('contestPrize').value = '';
                document.getElementById('contestMaxParticipants').value = '';
                document.getElementById('contestMaxTicketsPerUser').value = '';
                document.getElementById('contestAutoDrawNumber').checked = false;
                document.getElementById('contestEndDate').value = '';
                document.getElementById('contestStatus').value = 'active';
                
                loadContests();
                loadDashboard();
            } else {
                alert('âŒ ' + data.message);
            }
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©');
        }
    }

    function filterContests(status) {
        // This function would filter contests by status
        // For now, we'll just reload all contests
        loadContests();
    }

    async function editContest(contestId) {
        const newTitle = prompt('Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©:');
        if (!newTitle) return;

        const newPrize = prompt('Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:');
        if (!newPrize) return;

        try {
            const response = await fetch(`/api/admin/contests/${contestId}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${adminToken}`
                },
                body: JSON.stringify({
                    title: newTitle,
                    prize_amount: newPrize
                })
            });

            const data = await response.json();
            
            if (data.success) {
                alert('âœ… ' + data.message);
                loadContests();
            } else {
                alert('âŒ ' + data.message);
            }
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©');
        }
    }

    async function deleteContest(contestId, contestTitle) {
        if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© "${contestTitle}"ØŸ\nØ³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ§Øª Ø£ÙŠØ¶Ø§Ù‹.`)) return;

        try {
            const response = await fetch(`/api/admin/contests/${contestId}`, {
                method: 'DELETE',
                headers: { 'Authorization': `Bearer ${adminToken}` }
            });

            const data = await response.json();
            
            if (data.success) {
                alert('âœ… ' + data.message);
                loadContests();
                loadDashboard();
            } else {
                alert('âŒ ' + data.message);
            }
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©');
        }
    }

    function toggleUserSelect() {
        const sendTo = document.querySelector('input[name="sendTo"]:checked').value;
        const userSelectContainer = document.getElementById('userSelectContainer');
        
        if (sendTo === 'single') {
            userSelectContainer.style.display = 'block';
        } else {
            userSelectContainer.style.display = 'none';
            selectedUserForNotification = null;
            document.getElementById('userNotificationInfo').innerHTML = '';
            document.getElementById('userNotificationInfo').style.display = 'none';
        }
    }

    async function searchUserForNotification() {
        const email = document.getElementById('userEmailSelect').value.trim();
        if (!email) {
            alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…');
            return;
        }

        try {
            const response = await fetch(`/api/admin/users?search=${encodeURIComponent(email)}&limit=1`, {
                headers: { 'Authorization': `Bearer ${adminToken}` }
            });
            
            const data = await response.json();
            
            if (data.data && data.data.users && data.data.users.length > 0) {
                selectedUserForNotification = data.data.users[0];
                const user = selectedUserForNotification;
                
                document.getElementById('userNotificationInfo').innerHTML = `
                    <div style="background: #e8f5e8; padding: 10px; border-radius: 5px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <strong>${user.email}</strong><br>
                                <small style="color: #666;">ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø©: ${user.referral_code}</small>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-weight: bold; color: #28a745;">$${user.balance}</div>
                                <small style="color: #666;">Ø§Ù„Ø±ØµÙŠØ¯</small>
                            </div>
                        </div>
                        <div style="margin-top: 5px; font-size: 0.9em;">
                            ${user.is_active ? 'âœ… Ø­Ø³Ø§Ø¨ Ù†Ø´Ø·' : 'âŒ Ø­Ø³Ø§Ø¨ ØºÙŠØ± Ù†Ø´Ø·'}
                            ${user.is_banned ? ' | ğŸš« Ø­Ø³Ø§Ø¨ Ù…Ø­Ø¸ÙˆØ±' : ''}
                        </div>
                    </div>
                `;
                document.getElementById('userNotificationInfo').style.display = 'block';
            } else {
                document.getElementById('userNotificationInfo').innerHTML = `
                    <div style="color: #dc3545; text-align: center;">
                        âŒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯
                    </div>
                `;
                document.getElementById('userNotificationInfo').style.display = 'block';
                selectedUserForNotification = null;
            }
        } catch (error) {
            console.error('User search error:', error);
        }
    }

    async function sendNotification() {
        const title = document.getElementById('notificationTitle').value.trim();
        const message = document.getElementById('notificationMessage').value.trim();
        const type = document.getElementById('notificationType').value;
        const sendTo = document.querySelector('input[name="sendTo"]:checked').value;

        if (!title || !message) {
            alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ÙˆØ±Ø³Ø§Ù„ØªÙ‡');
            return;
        }

        if (sendTo === 'single' && !selectedUserForNotification) {
            alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø³ØªØ®Ø¯Ù… ØµØ§Ù„Ø­');
            return;
        }

        const requestData = {
            title,
            message,
            type
        };

        if (sendTo === 'single') {
            requestData.user_id = selectedUserForNotification.id;
        } else {
            requestData.send_to_all = true;
        }

        try {
            const response = await fetch('/api/admin/send-notification', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${adminToken}`
                },
                body: JSON.stringify(requestData)
            });

            const data = await response.json();
            
            if (data.success) {
                alert('âœ… ' + data.message);
                document.getElementById('notificationTitle').value = '';
                document.getElementById('notificationMessage').value = '';
                document.getElementById('userEmailSelect').value = '';
                document.getElementById('userNotificationInfo').innerHTML = '';
                document.getElementById('userNotificationInfo').style.display = 'none';
                selectedUserForNotification = null;
                loadNotificationHistory();
            } else {
                alert('âŒ ' + data.message);
            }
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±');
        }
    }

    async function loadNotificationHistory() {
        try {
            const response = await fetch('/api/admin/dashboard', {
                headers: { 'Authorization': `Bearer ${adminToken}` }
            });
            
            const data = await response.json();
            
            if (data.success) {
                document.getElementById('notificationsHistoryList').innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #666;">
                        Ø¢Ø®Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø³ØªØ¹Ø±Ø¶ Ù‡Ù†Ø§ Ø¨Ø¹Ø¯ Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    </div>
                `;
            }
        } catch (error) {
            console.error('Notification history error:', error);
        }
    }

    function resetBalanceForm() {
        document.getElementById('balanceUserEmail').value = '';
        document.getElementById('balanceAmount').value = '';
        document.getElementById('balanceOperation').value = 'add';
        document.getElementById('balanceReason').value = '';
        document.getElementById('userBalanceInfo').style.display = 'none';
        document.getElementById('balancePreview').style.display = 'none';
        currentUserForBalance = null;
    }

    async function searchUserForBalance() {
        const email = document.getElementById('balanceUserEmail').value.trim();
        if (!email) {
            document.getElementById('userBalanceInfo').style.display = 'none';
            currentUserForBalance = null;
            return;
        }

        try {
            const response = await fetch(`/api/admin/users?search=${encodeURIComponent(email)}&limit=1`, {
                headers: { 'Authorization': `Bearer ${adminToken}` }
            });
            
            const data = await response.json();
            
            if (data.data && data.data.users && data.data.users.length > 0) {
                currentUserForBalance = data.data.users[0];
                const user = currentUserForBalance;
                
                document.getElementById('userInfoContent').innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>${user.email}</strong><br>
                            <small style="color: #666;">ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø©: ${user.referral_code}</small>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 1.5em; font-weight: bold; color: #28a745;">$${user.balance}</div>
                            <small style="color: #666;">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ</small>
                        </div>
                    </div>
                    <div style="margin-top: 10px; font-size: 0.9em;">
                        ${user.is_active ? 'âœ… Ø­Ø³Ø§Ø¨ Ù†Ø´Ø·' : 'âŒ Ø­Ø³Ø§Ø¨ ØºÙŠØ± Ù†Ø´Ø·'}
                        ${user.is_banned ? ' | ğŸš« Ø­Ø³Ø§Ø¨ Ù…Ø­Ø¸ÙˆØ±' : ''}
                    </div>
                `;
                document.getElementById('userBalanceInfo').style.display = 'block';
                
                updateBalancePreview();
            } else {
                document.getElementById('userBalanceInfo').innerHTML = `
                    <div style="color: #dc3545; text-align: center;">
                        âŒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯
                    </div>
                `;
                document.getElementById('userBalanceInfo').style.display = 'block';
                currentUserForBalance = null;
                document.getElementById('balancePreview').style.display = 'none';
            }
        } catch (error) {
            console.error('User search error:', error);
        }
    }

    function updateBalancePreview() {
        const amount = parseFloat(document.getElementById('balanceAmount').value);
        const operation = document.getElementById('balanceOperation').value;
        const reason = document.getElementById('balanceReason').value;
        
        if (!currentUserForBalance || !amount || amount <= 0) {
            document.getElementById('balancePreview').style.display = 'none';
            return;
        }
        
        const currentBalance = parseFloat(currentUserForBalance.balance);
        let newBalance;
        
        if (operation === 'add') {
            newBalance = currentBalance + amount;
            operationText = 'Ø¥Ø¶Ø§ÙØ©';
        } else {
            newBalance = currentBalance - amount;
            if (newBalance < 0) newBalance = 0;
            operationText = 'Ø®ØµÙ…';
        }
        
        document.getElementById('previewContent').innerHTML = `
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <div>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</div>
                <div><strong>${currentUserForBalance.email}</strong></div>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <div>Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:</div>
                <div><strong>${operationText} $${amount}</strong></div>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <div>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ:</div>
                <div><strong>$${currentBalance}</strong></div>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <div>Ø§Ù„Ø±ØµÙŠØ¯ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„:</div>
                <div><strong style="color: ${newBalance >= currentBalance ? '#28a745' : '#dc3545'}">$${newBalance}</strong></div>
            </div>
            ${reason ? `<div style="margin-top: 10px;">
                <div>Ø§Ù„Ø³Ø¨Ø¨:</div>
                <div style="color: #666;">${reason}</div>
            </div>` : ''}
        `;
        
        document.getElementById('balancePreview').style.display = 'block';
    }

    document.getElementById('balanceAmount').addEventListener('input', updateBalancePreview);
    document.getElementById('balanceOperation').addEventListener('change', updateBalancePreview);
    document.getElementById('balanceReason').addEventListener('input', updateBalancePreview);

    async function adjustUserBalance() {
        if (!currentUserForBalance) {
            alert('ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø³ØªØ®Ø¯Ù… Ø£ÙˆÙ„Ø§Ù‹');
            return;
        }
        
        const amount = document.getElementById('balanceAmount').value;
        const operation = document.getElementById('balanceOperation').value;
        const reason = document.getElementById('balanceReason').value;
        
        if (!amount || amount <= 0) {
            alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­');
            return;
        }
        
        if (!reason.trim()) {
            alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¨Ø¨ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„');
            return;
        }
        
        const operationText = operation === 'add' ? 'Ø¥Ø¶Ø§ÙØ©' : 'Ø®ØµÙ…';
        if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ ${operationText} $${amount} Ù„Ù€ ${currentUserForBalance.email}ØŸ`)) return;

        try {
            const response = await fetch(`/api/admin/users/${currentUserForBalance.id}/adjust-balance`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${adminToken}`
                },
                body: JSON.stringify({ amount, operation, reason })
            });

            const data = await response.json();
            
            if (data.success) {
                alert(`âœ… ${data.message}\nØ§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯: $${data.data.new_balance}`);
                resetBalanceForm();
                loadDashboard();
                loadUsers();
            } else {
                alert('âŒ ' + data.message);
            }
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±ØµÙŠØ¯');
        }
    }

    // ğŸ”§ Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙØ­Ø§Øª
    async function loadPage() {
        const slug = document.getElementById('pageSelector').value;
        currentPageSlug = slug;
        
        try {
            const response = await fetch(`/api/page/${slug}`, {
                headers: {'Authorization': `Bearer ${adminToken}`}
            });
            
            const data = await response.json();
            
            if (data.success) {
                document.getElementById('pageTitle').value = data.data.title;
                document.getElementById('pageContent').value = data.data.content;
                document.getElementById('pagePreview').style.display = 'none';
            } else {
                alert('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©. Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ØµÙØ­Ø© Ø¬Ø¯ÙŠØ¯Ø©.');
                document.getElementById('pageTitle').value = slug === 'privacy' ? 'Privacy Policy' : 'Terms of Service';
                document.getElementById('pageContent').value = `<h1>${slug === 'privacy' ? 'Privacy Policy' : 'Terms of Service'}</h1>\n<p>Edit your page content here...</p>`;
            }
        } catch (error) {
            console.error('Page load error:', error);
            alert('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©');
        }
    }

    async function savePage() {
        const title = document.getElementById('pageTitle').value.trim();
        const content = document.getElementById('pageContent').value.trim();
        
        if (!title || !content) {
            alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰');
            return;
        }
        
        if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ù„ØµÙØ­Ø© "${title}"ØŸ`)) return;
        
        try {
            const response = await fetch(`/api/admin/page/${currentPageSlug}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${adminToken}`
                },
                body: JSON.stringify({ title, content })
            });
            
            const data = await response.json();
            
            if (data.success) {
                alert('âœ… ' + data.message);
            } else {
                alert('âŒ ' + data.message);
            }
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„ØµÙØ­Ø©');
        }
    }

    function previewPage() {
        const title = document.getElementById('pageTitle').value;
        const content = document.getElementById('pageContent').value;
        
        if (!title || !content) {
            alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰ Ø£ÙˆÙ„Ø§Ù‹');
            return;
        }
        
        const previewHtml = `
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>${title} - ZEMA</title>
                <style>
                    body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
                    h1 { color: #667eea; }
                    h2 { color: #764ba2; }
                    p { line-height: 1.6; }
                </style>
            </head>
            <body>
                <h1>${title}</h1>
                <div>${content}</div>
                <hr>
                <p><em>This is a preview of your page content.</em></p>
            </body>
            </html>
        `;
        
        const previewFrame = document.getElementById('previewFrame');
        previewFrame.srcdoc = previewHtml;
        document.getElementById('pagePreview').style.display = 'block';
    }

    function resetPageForm() {
        if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø­Ø§Ù„ÙŠØŸ')) {
            document.getElementById('pageTitle').value = '';
            document.getElementById('pageContent').value = '';
            document.getElementById('pagePreview').style.display = 'none';
            alert('âœ… ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬');
        }
    }

    function loadTemplate(templateType) {
        let title = '';
        let content = '';
        
        switch(templateType) {
            case 'terms_basic':
                title = 'Ø´Ø±ÙˆØ· Ø§Ù„Ø®Ø¯Ù…Ø© - ZEMA';
                content = `<h1>Ø´Ø±ÙˆØ· Ø§Ù„Ø®Ø¯Ù…Ø©</h1>
<p>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ù†ØµØ© ZEMA. Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†ØµØ©ØŒ ÙØ¥Ù†Ùƒ ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„ØªØ§Ù„ÙŠØ©:</p>

<h2>1. Ø§Ù„Ù‚Ø¨ÙˆÙ„</h2>
<p>Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ø§Ù„Ù…Ù†ØµØ©ØŒ ÙØ¥Ù†Ùƒ ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù….</p>

<h2>2. Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</h2>
<p>Ù„Ù„Ø§Ø³ØªÙØ§Ø¯Ø© Ù…Ù† Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ù†ØµØ©ØŒ ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ:</p>
<ul>
    <li>Ø£Ù† ØªÙƒÙˆÙ† Ø¨Ø¹Ù…Ø± 18 Ø³Ù†Ø© Ø£Ùˆ Ø£ÙƒØ«Ø±</li>
    <li>Ø£Ù† ØªÙ‚Ø¯Ù… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØµØ­ÙŠØ­Ø©</li>
    <li>Ø£Ù† ØªØ¯ÙØ¹ Ø±Ø³ÙˆÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¨Ø§Ù„ØºØ© $1</li>
</ul>

<h2>3. Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª</h2>
<p>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø­Ø¨ Ù‡Ùˆ $3ØŒ ÙˆÙŠØªÙ… Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø®Ù„Ø§Ù„ 24-48 Ø³Ø§Ø¹Ø©.</p>

<h2>4. Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª</h2>
<p>ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© Ø¨Ø´Ø±Ø§Ø¡ ØªØ°Ø§ÙƒØ± Ø¨Ù‚ÙŠÙ…Ø© $1 Ù„ÙƒÙ„ ØªØ°ÙƒØ±Ø©.</p>

<h2>5. Ø§Ù„Ø§ØªØµØ§Ù„</h2>
<p>Ù„Ø£ÙŠ Ø§Ø³ØªÙØ³Ø§Ø±ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø±: <a href="https://t.me/zema_support">@zema_support</a></p>`;
                break;
                
            case 'privacy_basic':
                title = 'Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ© - ZEMA';
                content = `<h1>Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</h1>
<p>Ù†Ø­Ù† ÙÙŠ ZEMA Ù†Ø­Ø±Øµ Ø¹Ù„Ù‰ Ø®ØµÙˆØµÙŠØªÙƒ ÙˆÙ†Ù„ØªØ²Ù… Ø¨Ø­Ù…Ø§ÙŠØ© Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©.</p>

<h2>1. Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙŠ Ù†Ø¬Ù…Ø¹Ù‡Ø§</h2>
<p>Ù†Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:</p>
<ul>
    <li>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</li>
    <li>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (Ù…Ø´ÙØ±Ø©)</li>
    <li>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„</li>
    <li>Ù†Ø´Ø§Ø·Ø§ØªÙƒ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØµØ©</li>
</ul>

<h2>2. ÙƒÙŠÙÙŠØ© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</h2>
<p>Ù†Ø³ØªØ®Ø¯Ù… Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ù„Ù€:</p>
<ul>
    <li>ØªÙˆÙÙŠØ± Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ù†ØµØ©</li>
    <li>Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª</li>
    <li>Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù‡Ù…Ø©</li>
    <li>ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</li>
</ul>

<h2>3. Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</h2>
<p>Ù†Ø³ØªØ®Ø¯Ù… ØªÙ‚Ù†ÙŠØ§Øª ØªØ´ÙÙŠØ± Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ø­Ù…Ø§ÙŠØ© Ø¨ÙŠØ§Ù†Ø§ØªÙƒ.</p>

<h2>4. Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</h2>
<p>Ù„Ø§ Ù†Ø¨ÙŠØ¹ Ø£Ùˆ Ù†Ø´Ø§Ø±Ùƒ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ù…Ø¹ Ø£Ø·Ø±Ø§Ù Ø«Ø§Ù„Ø«Ø© Ø¨Ø¯ÙˆÙ† Ù…ÙˆØ§ÙÙ‚ØªÙƒ.</p>

<h2>5. Ø§Ù„Ø§ØªØµØ§Ù„</h2>
<p>Ù„Ø£ÙŠ Ø§Ø³ØªÙØ³Ø§Ø± Ø¨Ø®ØµÙˆØµ Ø§Ù„Ø®ØµÙˆØµÙŠØ©: <a href="https://t.me/zema_support">@zema_support</a></p>`;
                break;
                
            case 'terms_detailed':
                title = 'Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙØµÙ„Ø© - ZEMA';
                content = `<h1>Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙØµÙ„Ø©</h1>
<p>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ${new Date().toLocaleDateString('ar-SA')}</p>

<h2>Ø§Ù„Ù…Ø§Ø¯Ø© 1: Ø§Ù„ØªØ¹Ø±ÙŠÙØ§Øª</h2>
<p><strong>Ø§Ù„Ù…Ù†ØµØ©:</strong> Ù…ÙˆÙ‚Ø¹ ZEMA Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆØªØ·Ø¨ÙŠÙ‚Ø§ØªÙ‡.</p>
<p><strong>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</strong> Ø£ÙŠ Ø´Ø®Øµ ÙŠÙ‚ÙˆÙ… Ø¨Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù†ØµØ©.</p>

<h2>Ø§Ù„Ù…Ø§Ø¯Ø© 2: Ø´Ø±ÙˆØ· Ø§Ù„ØªØ³Ø¬ÙŠÙ„</h2>
<ol>
    <li>ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¹Ù…Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… 18 Ø³Ù†Ø© Ø£Ùˆ Ø£ÙƒØ«Ø±</li>
    <li>ÙŠØ¬Ø¨ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø­Ù‚ÙŠÙ‚ÙŠ</li>
    <li>Ø±Ø³ÙˆÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„: $1 ØºÙŠØ± Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø§Ø³ØªØ±Ø¯Ø§Ø¯</li>
</ol>

<h2>Ø§Ù„Ù…Ø§Ø¯Ø© 3: Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª</h2>
<p>ÙŠÙ„ØªØ²Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù€:</p>
<ul>
    <li>Ø¹Ø¯Ù… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù†ØµØ© Ù„Ø£ÙŠ Ø£Ù†Ø´Ø·Ø© ØºÙŠØ± Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©</li>
    <li>Ø¹Ø¯Ù… Ø§Ø®ØªØ±Ø§Ù‚ Ø§Ù„Ù†Ø¸Ø§Ù… Ø£Ùˆ Ø§Ù„ØªÙ„Ø§Ø¹Ø¨ Ø¨Ù‡</li>
    <li>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­</li>
</ul>

<h2>Ø§Ù„Ù…Ø§Ø¯Ø© 4: Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª</h2>
<p>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰: $3<br>
ÙˆÙ‚Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©: 24-48 Ø³Ø§Ø¹Ø©<br>
Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: USDT ÙÙ‚Ø·</p>

<h2>Ø§Ù„Ù…Ø§Ø¯Ø© 5: Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª</h2>
<p>Ù†Ø³Ø¨Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©: 50% Ù…Ù† Ø±Ø³ÙˆÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù„ÙƒÙ„ Ø¥Ø­Ø§Ù„Ø© Ù†Ø§Ø¬Ø­Ø©</p>

<h2>Ø§Ù„Ù…Ø§Ø¯Ø© 6: Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª</h2>
<p>Ø³Ø¹Ø± Ø§Ù„ØªØ°ÙƒØ±Ø©: $1<br>
Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©: ØªØµÙ„ Ø¥Ù„Ù‰ $100<br>
ÙŠØªÙ… Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„ÙØ§Ø¦Ø²ÙŠÙ† ÙƒÙ„ Ø£Ø³Ø¨ÙˆØ¹</p>

<h2>Ø§Ù„Ù…Ø§Ø¯Ø© 7: Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</h2>
<p>Ù„Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª:<br>
ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯: support@zema.com<br>
ğŸ“ Ø§Ù„ØªÙ„ØºØ±Ø§Ù…: <a href="https://t.me/zema_support">@zema_support</a></p>

<h2>Ø§Ù„Ù…Ø§Ø¯Ø© 8: Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</h2>
<p>Ù†Ø­ØªÙØ¸ Ø¨Ø­Ù‚ ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø±ÙˆØ· ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª.</p>`;
                break;
                
            case 'privacy_detailed':
                title = 'Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ© Ø§Ù„Ù…ÙØµÙ„Ø© - ZEMA';
                content = `<h1>Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ© Ø§Ù„Ù…ÙØµÙ„Ø©</h1>
<p>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†ÙØ§Ø°: ${new Date().toLocaleDateString('ar-SA')}</p>

<h2>1. Ù†Ø·Ø§Ù‚ Ø§Ù„Ø³ÙŠØ§Ø³Ø©</h2>
<p>ØªÙ†Ø·Ø¨Ù‚ Ù‡Ø°Ù‡ Ø§Ù„Ø³ÙŠØ§Ø³Ø© Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø®Ø¯Ù…Ø§Øª Ù…Ù†ØµØ© ZEMA.</p>

<h2>2. Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙŠ Ù†Ø¬Ù…Ø¹Ù‡Ø§</h2>
<h3>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©:</h3>
<ul>
    <li>Ø§Ù„Ø§Ø³Ù… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</li>
    <li>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</li>
    <li>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (Ù…Ø´ÙØ±Ø©)</li>
</ul>

<h3>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©:</h3>
<ul>
    <li>Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø­ÙØ¸Ø©</li>
    <li>Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª</li>
    <li>Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨</li>
</ul>

<h3>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©:</h3>
<ul>
    <li>Ø¹Ù†ÙˆØ§Ù† IP</li>
    <li>Ù†ÙˆØ¹ Ø§Ù„Ù…ØªØµÙØ­</li>
    <li>ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø§Ù„Ø²ÙŠØ§Ø±Ø©</li>
</ul>

<h2>3. Ø£ØºØ±Ø§Ø¶ Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
<ol>
    <li>ØªÙˆÙÙŠØ± Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ù†ØµØ©</li>
    <li>ØªØ­Ø³ÙŠÙ† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</li>
    <li>Ø§Ù„Ø£Ù…Ø§Ù† ÙˆÙ…Ù†Ø¹ Ø§Ù„Ø§Ø­ØªÙŠØ§Ù„</li>
    <li>Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ</li>
</ol>

<h2>4. Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
<p>Ù†Ø³ØªØ®Ø¯Ù…:</p>
<ul>
    <li>ØªØ´ÙÙŠØ± SSL/TLS</li>
    <li>Ø¬Ø¯Ø±Ø§Ù† Ø­Ù…Ø§ÙŠØ©</li>
    <li>Ø£Ù†Ø¸Ù…Ø© Ù…Ø±Ø§Ù‚Ø¨Ø©</li>
</ul>

<h2>5. Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h2>
<p>ÙŠÙ…ÙƒÙ†Ùƒ:</p>
<ul>
    <li>Ø·Ù„Ø¨ Ù†Ø³Ø®Ø© Ù…Ù† Ø¨ÙŠØ§Ù†Ø§ØªÙƒ</li>
    <li>Ø·Ù„Ø¨ ØªØµØ­ÙŠØ­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</li>
    <li>Ø·Ù„Ø¨ Ø­Ø°Ù Ø­Ø³Ø§Ø¨Ùƒ</li>
</ul>

<h2>6. Ù…Ù„ÙØ§Øª Ø§Ù„ØªØ¹Ø±ÙŠÙ (Cookies)</h2>
<p>Ù†Ø³ØªØ®Ø¯Ù… Ù…Ù„ÙØ§Øª ØªØ¹Ø±ÙŠÙ Ù„Ù€:</p>
<ul>
    <li>ØªØ°ÙƒØ± ØªÙØ¶ÙŠÙ„Ø§ØªÙƒ</li>
    <li>ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</li>
    <li>ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡</li>
</ul>

<h2>7. Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h2>
<p>Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©:<br>
ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯: privacy@zema.com<br>
ğŸ“ Ø§Ù„ØªÙ„ØºØ±Ø§Ù…: <a href="https://t.me/zema_support">@zema_support</a></p>`;
                break;
        }
        
        document.getElementById('pageTitle').value = title;
        document.getElementById('pageContent').value = content;
        
        if (templateType.includes('terms')) {
            document.getElementById('pageSelector').value = 'terms';
        } else if (templateType.includes('privacy')) {
            document.getElementById('pageSelector').value = 'privacy';
        }
        
        alert('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„Ù‡ Ø«Ù… Ø­ÙØ¸Ù‡');
    }

    // ğŸ”§ Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
    async function testSupportLink() {
        const link = document.getElementById('supportLink').value;
        if (!link) {
            alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø¹Ù… Ø£ÙˆÙ„Ø§Ù‹');
            return;
        }
        
        const testResults = document.getElementById('testResults');
        testResults.style.display = 'block';
        testResults.innerHTML = `
            <div style="background: #fff3cd; padding: 15px; border-radius: 5px;">
                <strong>ğŸ”— Ø§Ø®ØªØ¨Ø§Ø± Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø¹Ù…:</strong><br>
                <a href="${link}" target="_blank" style="color: #667eea; word-break: break-all;">${link}</a><br><br>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-success" onclick="window.open('${link}', '_blank')">ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø·</button>
                    <button class="btn btn-info" onclick="navigator.clipboard.writeText('${link}')">Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
                </div>
            </div>
        `;
    }

    async function testSiteLink() {
        const link = document.getElementById('siteUrl').value;
        if (!link) {
            alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø£ÙˆÙ„Ø§Ù‹');
            return;
        }
        
        const testResults = document.getElementById('testResults');
        testResults.style.display = 'block';
        testResults.innerHTML = `
            <div style="background: #d4edda; padding: 15px; border-radius: 5px;">
                <strong>ğŸŒ Ø§Ø®ØªØ¨Ø§Ø± Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹:</strong><br>
                <a href="${link}" target="_blank" style="color: #28a745; word-break: break-all;">${link}</a><br><br>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-success" onclick="window.open('${link}', '_blank')">ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
                    <button class="btn btn-info" onclick="navigator.clipboard.writeText('${link}')">Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
                </div>
            </div>
        `;
    }

    async function reloadSettings() {
        if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…ØŸ')) {
            await loadSettings();
            alert('âœ… ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
        }
    }

    async function loadSettings() {
        try {
            const response = await fetch('/api/admin/settings', {
                headers: {'Authorization': `Bearer ${adminToken}`}
            });
            const data = await response.json();

            if (data.data) {
                // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„
                document.getElementById('paymentWallet').value = data.data.payment_wallet || '';
                document.getElementById('supportEmail').value = data.data.contact_email || '';
                document.getElementById('supportLink').value = data.data.support_link || '';
                document.getElementById('supportLink2').value = data.data.support_link_2 || '';
                
                // Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©
                document.getElementById('referralCommission').value = data.data.referral_commission || '';
                document.getElementById('minWithdrawal').value = data.data.min_withdrawal || '';
                document.getElementById('registrationAmount').value = data.data.registration_fee || '';
                document.getElementById('withdrawalTime').value = data.data.withdrawal_processing_time || '';
                
                // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª
                document.getElementById('contestTicketPriceSetting').value = data.data.weekly_contest_ticket_price || '';
                document.getElementById('contestPrizeSetting').value = data.data.weekly_contest_prize || '';
                document.getElementById('contestDuration').value = data.data.contest_duration || '';
                
                // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø©
                document.getElementById('siteName').value = data.data.site_name || '';
                document.getElementById('siteDescription').value = data.data.site_description || '';
                document.getElementById('siteUrl').value = data.data.site_url || '';
            }
        } catch (error) {
            console.error('Settings load error:', error);
            alert('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª');
        }
    }

    async function saveSettings() {
        const settings = {
            // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„
            payment_wallet: document.getElementById('paymentWallet').value,
            contact_email: document.getElementById('supportEmail').value,
            support_link: document.getElementById('supportLink').value,
            support_link_2: document.getElementById('supportLink2').value,
            
            // Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©
            referral_commission: document.getElementById('referralCommission').value,
            min_withdrawal: document.getElementById('minWithdrawal').value,
            registration_fee: document.getElementById('registrationAmount').value,
            withdrawal_processing_time: document.getElementById('withdrawalTime').value,
            
            // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø§Øª
            weekly_contest_ticket_price: document.getElementById('contestTicketPriceSetting').value,
            weekly_contest_prize: document.getElementById('contestPrizeSetting').value,
            contest_duration: document.getElementById('contestDuration').value,
            
            // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø©
            site_name: document.getElementById('siteName').value,
            site_description: document.getElementById('siteDescription').value,
            site_url: document.getElementById('siteUrl').value
        };

        if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªØŸ')) return;

        try {
            const response = await fetch('/api/admin/settings', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${adminToken}`
                },
                body: JSON.stringify(settings)
            });

            const data = await response.json();
            
            if (data.success) {
                alert('âœ… ØªÙ… Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
            } else {
                alert('âŒ ' + data.message);
            }
        } catch (error) {
            alert('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª');
        }
    }

    // Check for existing token on page load
    document.addEventListener('DOMContentLoaded', () => {
        const token = localStorage.getItem('adminToken');
        if (token) {
            adminToken = token;
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'block';
            loadDashboard();
            loadSettings();
        }
    });
  </script>
</body>
</html>
